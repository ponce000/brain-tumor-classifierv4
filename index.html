<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ”¾å°„ç·šç§‘èª­å½±ç”¨ è„³è…«ç˜é‘‘åˆ¥ã‚·ã‚¹ãƒ†ãƒ </title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
        .disease-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .disease-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .section-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: 600;
            margin: 8px 0 4px 0;
        }
        .highlight { background: #fef3c7; padding: 2px 4px; border-radius: 3px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const RadiologyTumorSystem = () => {
            const [selectedCriteria, setSelectedCriteria] = useState({});
            const [results, setResults] = useState([]);
            const [expandedSections, setExpandedSections] = useState({});
            const [selectedDisease, setSelectedDisease] = useState(null);
            const [searchTerm, setSearchTerm] = useState('');

            // è©³ç´°ãªè„³è…«ç˜ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆRadiopedia + è‡¨åºŠãƒ‡ãƒ¼ã‚¿ï¼‰
            const tumorDatabase = {
                // ç¥çµŒä¸Šçš®è…«ç˜
                'glioblastoma': {
                    name: 'è† èŠ½è…« (Glioblastoma)',
                    whoGrade: 'WHO Grade 4',
                    agePreference: 'æˆäººï¼ˆ50-70æ­³ï¼‰',
                    location: 'å¤§è„³åŠçƒï¼ˆå‰é ­ãƒ»å´é ­è‘‰å¤šã„ï¼‰',
                    basics: [
                        'WHO CNS5ã§IDH-wildtype glioblastomaã¨IDH-mutant astrocytoma grade 4ã«åˆ†é¡',
                        'æœ€ã‚‚æ‚ªæ€§åº¦ã®é«˜ã„åŸç™ºæ€§è„³è…«ç˜ã€ä¸­å¤®ç”Ÿå­˜æœŸé–“15ãƒ¶æœˆ',
                        'ç”·æ€§ã«å¤šã„ï¼ˆM:F = 1.6:1ï¼‰ã€ç™½äººã«å¤šã„',
                        'åˆ†å­è¨ºæ–­ï¼šIDHå¤‰ç•°ã€MGMT promoter methylationã€1p/19q co-deletionãŒé‡è¦'
                    ],
                    imaging: [
                        'T1WIï¼šä¸å‡ä¸€ãªä½ä¿¡å·ã€å£Šæ­»éƒ¨ã¯è‘—æ˜ä½ä¿¡å·',
                        'T2/FLAIRï¼šä¸å‡ä¸€é«˜ä¿¡å·ã€å‘¨å›²æµ®è…«é¡•è‘—',
                        'é€ å½±ï¼šä¸è¦å‰‡ãªãƒªãƒ³ã‚°çŠ¶å¼·åŒ–ã€é€ å½±ã•ã‚Œãªã„å£Šæ­»ä¸­å¿ƒéƒ¨',
                        'DWIï¼šå£Šæ­»éƒ¨ã¯é«˜ADCã€viable tumorã¯ä½ï½ç­‰ADC',
                        'SWIï¼šå‡ºè¡€ã¯ç´„20%ã€å¾®å°å‡ºè¡€å¤šæ•°',
                        'MRSï¼šCho/Cræ¯”ä¸Šæ˜‡ã€NAAä½ä¸‹ã€lactate/lipid peaks'
                    ],
                    differentials: ['è»¢ç§»æ€§è…«ç˜', 'åŸç™ºæ€§CNSãƒªãƒ³ãƒ‘è…«', 'è†¿ç˜'],
                    prognosis: 'æ¥µã‚ã¦ä¸è‰¯ã€ä¸­å¤®ç”Ÿå­˜æœŸé–“15ãƒ¶æœˆ',
                    keywords: ['ãƒªãƒ³ã‚°çŠ¶é€ å½±', 'å£Šæ­»', 'æµ®è…«', 'ä¸è¦å‰‡', 'IDH wildtype']
                },

                'pilocytic_astrocytoma': {
                    name: 'æ¯›æ§˜ç´°èƒæ€§æ˜Ÿç´°èƒè…« (Pilocytic Astrocytoma)',
                    whoGrade: 'WHO Grade 1',
                    agePreference: 'å°å…ï¼ˆ5-20æ­³ï¼‰',
                    location: 'å°è„³ã€è¦–ç¥çµŒã€è¦–åºŠä¸‹éƒ¨',
                    basics: [
                        'WHO CNS5ã§æœ€ã‚‚ä¸€èˆ¬çš„ãªå°å…è„³è…«ç˜',
                        'è‰¯æ€§ã€å¤–ç§‘çš„å…¨æ‘˜ã§æ²»ç™’å¯èƒ½',
                        'BRAFéºä¼å­ç•°å¸¸ï¼ˆfusionæˆ–ã„ã¯V600Eå¤‰ç•°ï¼‰ãŒå¤šæ•°',
                        'NF1é–¢é€£ä¾‹ã¯è¦–ç¥çµŒã«å¥½ç™º'
                    ],
                    imaging: [
                        'T1WIï¼šåš¢èƒã¯ä½ä¿¡å·ã€çµç¯€ã¯ç­‰ï½ä½ä¿¡å·',
                        'T2WIï¼šåš¢èƒã¯é«˜ä¿¡å·ã€çµç¯€ã¯é«˜ï½ç­‰ä¿¡å·',
                        'é€ å½±ï¼šå£åœ¨çµç¯€ã®è‘—æ˜ãªé€ å½±åŠ¹æœï¼ˆç‰¹å¾´çš„ï¼‰',
                        'DWIï¼šçµç¯€éƒ¨ã¯è»½åº¦æ‹¡æ•£åˆ¶é™ã€åš¢èƒéƒ¨ã¯åˆ¶é™ãªã—',
                        'åš¢èƒï¼‹å£åœ¨çµç¯€ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒ90%ã§å…¸å‹çš„',
                        'å‘¨å›²æµ®è…«ã¯è»½å¾®ã€å‡ºè¡€ãƒ»çŸ³ç°åŒ–ã¯ç¨€'
                    ],
                    differentials: ['è¡€ç®¡èŠ½è…«', 'åš¢èƒæ€§è»¢ç§»', 'PLAGL1-NET'],
                    prognosis: 'è‰¯å¥½ã€10å¹´ç”Ÿå­˜ç‡90%ä»¥ä¸Š',
                    keywords: ['åš¢èƒæ€§', 'å£åœ¨çµç¯€', 'è‘—æ˜é€ å½±', 'å°å…', 'BRAF']
                },

                'medulloepithelioma': {
                    name: 'é«„ä¸Šçš®è…« (Medulloepithelioma)',
                    whoGrade: 'WHO Grade 4',
                    agePreference: 'ä¹³å¹¼å…ï¼ˆ1-5æ­³ï¼‰',
                    location: 'è„³å®¤å‘¨å›²ï¼ˆä¸»ã«å´è„³å®¤ï¼‰',
                    basics: [
                        'WHO CNS5ã§èƒå…æ€§è…«ç˜ã«åˆ†é¡ã•ã‚Œã‚‹ç¨€ãªæ‚ªæ€§è…«ç˜',
                        'ç¥çµŒç®¡ã®æœªåˆ†åŒ–ä¸Šçš®ã«é¡ä¼¼ã—ãŸçµ„ç¹”åƒ',
                        'C19MCå¢—å¹…ãŒç‰¹å¾´çš„ï¼ˆETMRã¨ç•°ãªã‚‹ç‚¹ï¼‰',
                        'è„³å®¤æ’­ç¨®ã®ãƒªã‚¹ã‚¯é«˜ã„'
                    ],
                    imaging: [
                        'T1WIï¼šä¸å‡ä¸€ãªç­‰ï½ä½ä¿¡å·',
                        'T2WIï¼šä¸å‡ä¸€é«˜ä¿¡å·ã€åš¢èƒæ€§å¤‰åŒ–å¤šã„',
                        'é€ å½±ï¼šä¸å‡ä¸€ãªé€ å½±åŠ¹æœ',
                        'DWIï¼šå¼·ã„æ‹¡æ•£åˆ¶é™ï¼ˆETMRã¨é¡ä¼¼ï¼‰',
                        'è„³å®¤å†…çªå‡ºã™ã‚‹åˆ†è‘‰çŠ¶è…«ç˜¤',
                        'æ°´é ­ç—‡ä½µç™ºé »åº¦é«˜ã„'
                    ],
                    differentials: ['ETMR', 'è„ˆçµ¡å¢ç™Œ', 'AT/RT'],
                    prognosis: 'ä¸è‰¯ã€5å¹´ç”Ÿå­˜ç‡30%æœªæº€',
                    keywords: ['è„³å®¤å†…', 'åˆ†è‘‰çŠ¶', 'å¼·ã„æ‹¡æ•£åˆ¶é™', 'ä¹³å¹¼å…', 'C19MC']
                },

                'plagl1_net': {
                    name: 'PLAGL1èåˆé™½æ€§ç¥çµŒä¸Šçš®è…«ç˜ (PLAGL1-NET)',
                    whoGrade: 'WHO Grade 2-3',
                    agePreference: 'å°å…ï¼ˆä¸­å¤®å€¤6æ­³ã€0.5-15æ­³ï¼‰',
                    location: 'å¤§è„³åŠçƒçš®è³ªä¸‹ï¼ˆå…¨ä¾‹ï¼‰',
                    basics: [
                        'WHO CNS5ã§æ–°è¨­ã•ã‚ŒãŸå¸Œå°‘å°å…è„³è…«ç˜',
                        'EWSR1-PLAGL1ã‚„PLAGL1-FUSãªã©å¤šæ§˜ãªPLAGL1èåˆ',
                        'ç‰¹æœ‰ã®ãƒ¡ãƒãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹ã‚’å½¢æˆ',
                        'å˜èª¿ãªå°å‹ã€œä¸­å‹ç´°èƒã®ã‚·ãƒ¼ãƒˆçŠ¶å¢—æ®–ï¼‹å½ãƒ­ã‚¼ãƒƒãƒˆ',
                        'EMA dot-likeé™½æ€§ã€GFAPÂ±ã€OLIG2é™°æ€§'
                    ],
                    imaging: [
                        'T2WIï¼šé«˜ï½ç­‰ä¿¡å·ã®åš¢èƒæ€§ï¼‹å£åœ¨çµç¯€å‹ãŒå…¸å‹',
                        'T1é€ å½±ï¼šå£ã¯ãƒªãƒ³ã‚°çŠ¶ï½ä¸å‡ä¸€å¢—å¼·',
                        'ä½T2åŸŸã¯çŸ³ç°åŒ–ãƒ»é™³æ—§æ€§è¡€è…«ï¼ˆSWI/CTã§ç¢ºèªï¼‰',
                        'DWIï¼šæ‹¡æ•£ä½ä¸‹ã¯å¼±ã„ã‹ä¸æ˜ç­ï¼ˆETMRã‚ˆã‚Šè»½åº¦ï¼‰',
                        'å‘¨å›²æµ®è…«ã¯è»½åº¦ï½ä¸­ç­‰åº¦',
                        'MRA/4D-MRAã§å†…éƒ¨è¡€ç®¡æå‡ºå ±å‘Šã‚ã‚Š'
                    ],
                    differentials: ['ä¸Šè¡£è…«', 'æ¯›æ§˜ç´°èƒæ€§æ˜Ÿç´°èƒè…«', 'ETMR'],
                    prognosis: 'å°å…ä¸Šè¡£è…«ã‚ˆã‚Šè‰¯å¥½ã€PFSä¸­å¤®å€¤ç´„35ãƒ¶æœˆ',
                    keywords: ['åš¢èƒæ€§', 'çš®è³ªä¸‹', 'å°å…', 'PLAGL1èåˆ', 'è¡€ç®¡è±Šå¯Œ']
                },

                'ependymoma': {
                    name: 'ä¸Šè¡£è…« (Ependymoma)',
                    whoGrade: 'WHO Grade 2-3',
                    agePreference: 'å°å…ï¼šå¾Œé ­è“‹çª©ã€æˆäººï¼šè„Šé«„',
                    location: 'è„³å®¤ç³»ï¼ˆç¬¬4è„³å®¤ã€å´è„³å®¤ï¼‰',
                    basics: [
                        'WHO CNS5ã§åˆ†å­åˆ†é¡ï¼šposterior fossa A/Bã€supratentorial ZFTAèåˆç­‰',
                        'Group Aï¼šä¹³å¹¼å…ã€äºˆå¾Œä¸è‰¯',
                        'Group Bï¼šå­¦ç«¥æœŸã€äºˆå¾Œè‰¯å¥½',
                        'å…¨æ‘˜é™¤ãŒæœ€ã‚‚é‡è¦ãªäºˆå¾Œå› å­'
                    ],
                    imaging: [
                        'T1WIï¼šç­‰ï½ä½ä¿¡å·ã€åš¢èƒæ€§å¤‰åŒ–å¤šã„',
                        'T2WIï¼šä¸å‡ä¸€é«˜ä¿¡å·',
                        'é€ å½±ï¼šä¸å‡ä¸€é€ å½±ã€ä¸€éƒ¨éé€ å½±åŸŸ',
                        'DWIï¼šæ‹¡æ•£åˆ¶é™ã¯è»½åº¦ï½ä¸­ç­‰åº¦',
                        'ç¬¬4è„³å®¤åº•ã‹ã‚‰ç™ºç”Ÿã—ã€Luschkaå­”ãƒ»Magendieå­”ã‹ã‚‰çªå‡º',
                        'çŸ³ç°åŒ–30%ã€å‡ºè¡€20%'
                    ],
                    differentials: ['é«„èŠ½è…«', 'PLAGL1-NET', 'è„ˆçµ¡å¢è…«ç˜'],
                    prognosis: 'åˆ†å­å‹ã«ã‚ˆã‚Šå¤§ããç•°ãªã‚‹',
                    keywords: ['è„³å®¤ç³»', 'åˆ†å­åˆ†é¡', 'Luschkaå­”çªå‡º', 'å…¨æ‘˜é‡è¦']
                },

                'medulloblastoma': {
                    name: 'é«„èŠ½è…« (Medulloblastoma)',
                    whoGrade: 'WHO Grade 4',
                    agePreference: 'å°å…ï¼ˆ3-8æ­³ãŒãƒ”ãƒ¼ã‚¯ï¼‰',
                    location: 'å°è„³è™«éƒ¨ï¼ˆå°å…ï¼‰ã€å°è„³åŠçƒï¼ˆæˆäººï¼‰',
                    basics: [
                        'WHO CNS5åˆ†å­åˆ†é¡ï¼šWNTã€SHHã€Group 3ã€Group 4',
                        'æœ€ã‚‚é »åº¦ã®é«˜ã„å°å…æ‚ªæ€§è„³è…«ç˜',
                        'æ’­ç¨®æ€§ã®é«˜ã„è…«ç˜ï¼ˆè¨ºæ–­æ™‚30%ã§æ’­ç¨®ï¼‰',
                        'WNTå‹ãŒæœ€ã‚‚äºˆå¾Œè‰¯å¥½'
                    ],
                    imaging: [
                        'T1WIï¼šç­‰ï½ä½ä¿¡å·ã€å‡ä¸€æ€§é«˜ã„',
                        'T2WIï¼šä½ï½ç­‰ä¿¡å·ï¼ˆhypercellularã®ãŸã‚ï¼‰',
                        'é€ å½±ï¼šå‡ä¸€ï½è»½åº¦ä¸å‡ä¸€é€ å½±',
                        'DWIï¼šå¼·ã„æ‹¡æ•£åˆ¶é™ï¼ˆADC ~550Ã—10â»â¶mmÂ²/sï¼‰',
                        'å°è„³è™«éƒ¨ã®å¢ƒç•Œæ˜ç­ãªè…«ç˜¤',
                        'æ°´é ­ç—‡ä½µç™ºå¤šã„ã€æ’­ç¨®æ¤œç´¢å¿…è¦'
                    ],
                    differentials: ['ä¸Šè¡£è…«', 'æ¯›æ§˜ç´°èƒæ€§æ˜Ÿç´°èƒè…«', 'AT/RT'],
                    prognosis: 'åˆ†å­å‹ã«ã‚ˆã‚Šç•°ãªã‚‹ã€å…¨ä½“ã§5å¹´ç”Ÿå­˜ç‡70%',
                    keywords: ['å°è„³è™«éƒ¨', 'å¼·ã„æ‹¡æ•£åˆ¶é™', 'æ’­ç¨®', 'åˆ†å­åˆ†é¡', 'hypercellular']
                },

                'atrt': {
                    name: 'éå®šå‹å¥‡å½¢è…«æ§˜/æ¨ªç´‹ç­‹è‚‰è…«æ§˜è…«ç˜ (AT/RT)',
                    whoGrade: 'WHO Grade 4',
                    agePreference: 'ä¹³å¹¼å…ï¼ˆä¸­å¤®å€¤2æ­³æœªæº€ï¼‰',
                    location: 'å¾Œé ­è“‹çª©ã€å¤§è„³åŠçƒã€è„Šé«„',
                    basics: [
                        'WHO CNS5ã§èƒå…æ€§è…«ç˜ã€SMARCB1/SMARCA4æ¬ å¤±',
                        'æ¥µã‚ã¦äºˆå¾Œä¸è‰¯ãªä¹³å¹¼å…è…«ç˜',
                        '3ã¤ã®åˆ†å­äºœå‹ï¼šSHHã€TYRã€MYC',
                        'å¤šæ§˜ãªçµ„ç¹”åƒï¼ˆä¸Šçš®æ§˜ã€é–“è‘‰ç³»ã€ç¥çµŒç³»ï¼‰'
                    ],
                    imaging: [
                        'T1WIï¼šä¸å‡ä¸€ãªç­‰ï½ä½ä¿¡å·',
                        'T2WIï¼šä¸å‡ä¸€é«˜ä¿¡å·',
                        'é€ å½±ï¼šä¸å‡ä¸€é€ å½±ã€å£Šæ­»å¤šã„',
                        'DWIï¼šå¼·ã„æ‹¡æ•£åˆ¶é™',
                        'ä¸è¦å‰‡ãªå½¢çŠ¶ã€å‡ºè¡€ãƒ»å£Šæ­»å¤šã„',
                        'æ’­ç¨®é »åº¦é«˜ã„'
                    ],
                    differentials: ['é«„èŠ½è…«', 'ETMR', 'ä¸Šè¡£è…«'],
                    prognosis: 'æ¥µã‚ã¦ä¸è‰¯ã€5å¹´ç”Ÿå­˜ç‡50%æœªæº€',
                    keywords: ['ä¹³å¹¼å…', 'SMARCB1æ¬ å¤±', 'å¼·ã„æ‹¡æ•£åˆ¶é™', 'ä¸è¦å‰‡', 'æ’­ç¨®']
                },

                // é«„è†œè…«
                'meningioma': {
                    name: 'é«„è†œè…« (Meningioma)',
                    whoGrade: 'WHO Grade 1-3',
                    agePreference: 'ä¸­å¹´å¥³æ€§ï¼ˆ40-60æ­³ï¼‰',
                    location: 'å‚çŸ¢çŠ¶æ´ã€è¶å½¢éª¨ç¸ã€parasella',
                    basics: [
                        'WHO CNS5ã§15ã®subtypeã«åˆ†é¡',
                        'å¥³æ€§ã«å¤šã„ï¼ˆF:M = 2:1ï¼‰ã€å¦Šå¨ ãƒ»ã‚¨ã‚¹ãƒˆãƒ­ã‚²ãƒ³ã§å¢—å¤§',
                        'å¤šç™ºä¾‹ã¯NF2é–¢é€£',
                        'Grade 1ãŒ90%ã€Grade 2ãŒ7%ã€Grade 3ãŒ1%'
                    ],
                    imaging: [
                        'T1WIï¼šç­‰ä¿¡å·ã€å‡ä¸€æ€§é«˜ã„',
                        'T2WIï¼šç­‰ï½ã‚„ã‚„é«˜ä¿¡å·',
                        'é€ å½±ï¼šå‡ä¸€ã§è‘—æ˜ãªé€ å½±åŠ¹æœ',
                        'DWIï¼šè»½åº¦æ‹¡æ•£åˆ¶é™',
                        'dural tail signï¼ˆç¡¬è†œå°¾å¾´å€™ï¼‰',
                        'çŸ³ç°åŒ–ãƒ»éª¨åŒ–å¤šã„ã€CSF cleft',
                        'hyperostosisï¼ˆéª¨ç¡¬åŒ–ï¼‰'
                    ],
                    differentials: ['è»¢ç§»', 'è¡€ç®¡èŠ½è…«', 'å­¤ç™ºæ€§ç·šç¶­æ€§è…«ç˜'],
                    prognosis: 'Grade 1ã¯è‰¯å¥½ã€Grade 2-3ã¯å†ç™ºç‡é«˜ã„',
                    keywords: ['ç¡¬è†œä»˜ç€', 'å‡ä¸€é€ å½±', 'dural tail', 'çŸ³ç°åŒ–', 'å¥³æ€§']
                },

                // è»¢ç§»æ€§è…«ç˜
                'brain_metastases': {
                    name: 'è„³è»¢ç§» (Brain Metastases)',
                    whoGrade: 'åŸç™ºå·£ã«ã‚ˆã‚‹',
                    agePreference: 'æˆäººï¼ˆ50-70æ­³ï¼‰',
                    location: 'çš®è³ªé«„è³ªå¢ƒç•Œã€è¡€æµè±Šå¯Œéƒ¨ä½',
                    basics: [
                        'æœ€ã‚‚é »åº¦ã®é«˜ã„è„³è…«ç˜ï¼ˆåŸç™ºæ€§ã®10å€ï¼‰',
                        'åŸç™ºå·£ï¼šè‚ºç™Œ50%ã€ä¹³ç™Œ15%ã€è…ç™Œ10%ã€å¤§è…¸ç™Œ5%',
                        'å¤šç™ºæ€§ãŒç‰¹å¾´ï¼ˆ70-80%ï¼‰',
                        'è¡€æ¶²è„³é–¢é–€ç ´ç¶»ã«ã‚ˆã‚‹é€ å½±åŠ¹æœ'
                    ],
                    imaging: [
                        'T1WIï¼šç­‰ï½ä½ä¿¡å·ã€å¤šç™ºæ€§',
                        'T2WIï¼šä¸å‡ä¸€é«˜ä¿¡å·',
                        'é€ å½±ï¼šãƒªãƒ³ã‚°çŠ¶ï½çµç¯€çŠ¶é€ å½±',
                        'DWIï¼šä¸­å¿ƒéƒ¨ã¯é«˜ADCï¼ˆå£Šæ­»ï¼‰',
                        'çš®è³ªé«„è³ªå¢ƒç•Œã«å¥½ç™º',
                        'è‘—æ˜ãªå‘¨å›²æµ®è…«',
                        'å‡ºè¡€æ€§ï¼šè…ç™Œã€ç”²çŠ¶è…ºç™Œã€çµ¨æ¯›ç™Œã€æ‚ªæ€§é»’è‰²è…«'
                    ],
                    differentials: ['å¤šç™ºæ€§è† èŠ½è…«', 'è†¿ç˜', 'å¤šç™ºæ€§ç¡¬åŒ–ç—‡'],
                    prognosis: 'åŸç™ºå·£ãƒ»å€‹æ•°ãƒ»å…¨èº«çŠ¶æ…‹ã«ã‚ˆã‚Šç•°ãªã‚‹',
                    keywords: ['å¤šç™ºæ€§', 'çš®è³ªé«„è³ªå¢ƒç•Œ', 'è‘—æ˜æµ®è…«', 'æ—¢å¾€æ­´', 'å‡ºè¡€æ€§']
                },

                // ãƒªãƒ³ãƒ‘è…«
                'pcnsl': {
                    name: 'åŸç™ºæ€§ä¸­æ¢ç¥çµŒç³»ãƒªãƒ³ãƒ‘è…« (PCNSL)',
                    whoGrade: 'é«˜æ‚ªæ€§åº¦',
                    agePreference: 'é«˜é½¢è€…ï¼ˆ60-70æ­³ï¼‰ã€å…ç–«ä¸å…¨è€…',
                    location: 'æ·±éƒ¨ç™½è³ªã€åŸºåº•æ ¸ã€è„³å®¤å‘¨å›²',
                    basics: [
                        'ã³ã¾ã‚“æ€§å¤§ç´°èƒå‹Bç´°èƒãƒªãƒ³ãƒ‘è…«ãŒ95%',
                        'å…ç–«ä¸å…¨é–¢é€£ï¼ˆHIVã€ç§»æ¤å¾Œï¼‰',
                        'EBVé–¢é€£ãŒå¤šã„',
                        'ã‚¹ãƒ†ãƒ­ã‚¤ãƒ‰åå¿œæ€§ï¼ˆã‚´ãƒ¼ã‚¹ãƒˆåŠ¹æœï¼‰'
                    ],
                    imaging: [
                        'T1WIï¼šç­‰ï½ä½ä¿¡å·',
                        'T2WIï¼šç­‰ï½ã‚„ã‚„é«˜ä¿¡å·',
                        'é€ å½±ï¼šå‡ä¸€ã§è‘—æ˜ãªé€ å½±åŠ¹æœ',
                        'DWIï¼šå¼·ã„æ‹¡æ•£åˆ¶é™ï¼ˆhypercellularï¼‰',
                        'æ·±éƒ¨æ§‹é€ ã«å¥½ç™º',
                        'å‘¨å›²æµ®è…«ã¯è»½åº¦',
                        'CSFæ’­ç¨®å¤šã„'
                    ],
                    differentials: ['è† èŠ½è…«', 'è»¢ç§»', 'è„±é«„æ€§ç–¾æ‚£'],
                    prognosis: 'HD-MTXæ²»ç™‚ã§æ”¹å–„ã€5å¹´ç”Ÿå­˜ç‡30-50%',
                    keywords: ['æ·±éƒ¨', 'å‡ä¸€é€ å½±', 'å¼·ã„æ‹¡æ•£åˆ¶é™', 'ã‚¹ãƒ†ãƒ­ã‚¤ãƒ‰åå¿œ', 'é«˜é½¢è€…']
                }
            };

            // åˆ†é¡åŸºæº–ï¼ˆRadiopediaãƒ™ãƒ¼ã‚¹ï¼‰
            const classificationCriteria = {
                age: {
                    name: 'å¹´é½¢',
                    icon: 'ğŸ‘¶',
                    options: [
                        { value: 'infant', label: 'ä¹³å¹¼å… (0-3æ­³)', tumors: ['AT/RT', 'medulloepithelioma', 'choroid_plexus_papilloma'] },
                        { value: 'child', label: 'å°å… (4-17æ­³)', tumors: ['medulloblastoma', 'pilocytic_astrocytoma', 'ependymoma', 'plagl1_net'] },
                        { value: 'adult', label: 'æˆäºº (18-65æ­³)', tumors: ['glioblastoma', 'meningioma', 'brain_metastases'] },
                        { value: 'elderly', label: 'é«˜é½¢è€… (65æ­³ä»¥ä¸Š)', tumors: ['glioblastoma', 'brain_metastases', 'pcnsl'] }
                    ]
                },
                location: {
                    name: 'éƒ¨ä½',
                    icon: 'ğŸ§ ',
                    options: [
                        { value: 'frontal', label: 'å‰é ­è‘‰', tumors: ['glioblastoma', 'brain_metastases', 'meningioma'] },
                        { value: 'temporal', label: 'å´é ­è‘‰', tumors: ['glioblastoma', 'brain_metastases'] },
                        { value: 'parietal', label: 'é ­é ‚è‘‰', tumors: ['glioblastoma', 'brain_metastases', 'meningioma'] },
                        { value: 'occipital', label: 'å¾Œé ­è‘‰', tumors: ['brain_metastases', 'glioblastoma'] },
                        { value: 'cerebellum', label: 'å°è„³', tumors: ['pilocytic_astrocytoma', 'medulloblastoma', 'brain_metastases'] },
                        { value: 'brainstem', label: 'è„³å¹¹', tumors: ['brainstem_glioma', 'cavernoma'] },
                        { value: 'intraventricular', label: 'è„³å®¤å†…', tumors: ['ependymoma', 'medulloepithelioma', 'choroid_plexus_tumor'] },
                        { value: 'subcortical', label: 'çš®è³ªä¸‹ç™½è³ª', tumors: ['plagl1_net', 'brain_metastases', 'glioblastoma'] },
                        { value: 'deep', label: 'æ·±éƒ¨æ§‹é€ ', tumors: ['pcnsl', 'glioblastoma'] },
                        { value: 'dural', label: 'ç¡¬è†œä»˜ç€', tumors: ['meningioma', 'dural_metastases'] }
                    ]
                },
                enhancement: {
                    name: 'é€ å½±ãƒ‘ã‚¿ãƒ¼ãƒ³',
                    icon: 'ğŸ’‰',
                    options: [
                        { value: 'homogeneous', label: 'å‡ä¸€é€ å½±', tumors: ['meningioma', 'pcnsl', 'pilocytic_astrocytoma'] },
                        { value: 'heterogeneous', label: 'ä¸å‡ä¸€é€ å½±', tumors: ['glioblastoma', 'brain_metastases', 'ependymoma'] },
                        { value: 'ring', label: 'ãƒªãƒ³ã‚°çŠ¶é€ å½±', tumors: ['glioblastoma', 'brain_metastases', 'plagl1_net'] },
                        { value: 'nodular', label: 'çµç¯€çŠ¶é€ å½±', tumors: ['pilocytic_astrocytoma', 'brain_metastases'] },
                        { value: 'minimal', label: 'é€ å½±åŠ¹æœè»½å¾®', tumors: ['low_grade_glioma', 'epidermoid'] }
                    ]
                },
                diffusion: {
                    name: 'DWIæ‰€è¦‹',
                    icon: 'ğŸŒŠ',
                    options: [
                        { value: 'restricted_strong', label: 'å¼·ã„æ‹¡æ•£åˆ¶é™', tumors: ['medulloblastoma', 'pcnsl', 'at/rt'] },
                        { value: 'restricted_mild', label: 'è»½åº¦æ‹¡æ•£åˆ¶é™', tumors: ['meningioma', 'ependymoma'] },
                        { value: 'no_restriction', label: 'æ‹¡æ•£åˆ¶é™ãªã—', tumors: ['pilocytic_astrocytoma', 'brain_metastases'] },
                        { value: 'mixed', label: 'æ··åœ¨ãƒ‘ã‚¿ãƒ¼ãƒ³', tumors: ['glioblastoma', 'plagl1_net'] }
                    ]
                },
                t2_signal: {
                    name: 'T2WIä¿¡å·',
                    icon: 'ğŸ“¶',
                    options: [
                        { value: 'high', label: 'é«˜ä¿¡å·', tumors: ['glioblastoma', 'brain_metastases', 'ependymoma'] },
                        { value: 'iso', label: 'ç­‰ä¿¡å·', tumors: ['meningioma', 'pcnsl'] },
                        { value: 'low', label: 'ä½ä¿¡å·', tumors: ['medulloblastoma'] },
                        { value: 'heterogeneous', label: 'ä¸å‡ä¸€', tumors: ['glioblastoma', 'plagl1_net'] }
                    ]
                },
                special_findings: {
                    name: 'ç‰¹æ®Šæ‰€è¦‹',
                    icon: 'â­',
                    options: [
                        { value: 'cystic_nodular', label: 'åš¢èƒï¼‹å£åœ¨çµç¯€', tumors: ['pilocytic_astrocytoma', 'plagl1_net'] },
                        { value: 'dural_tail', label: 'Dural tail sign', tumors: ['meningioma'] },
                        { value: 'hemorrhage', label: 'å‡ºè¡€æˆåˆ†', tumors: ['brain_metastases', 'glioblastoma'] },
                        { value: 'calcification', label: 'çŸ³ç°åŒ–', tumors: ['meningioma', 'oligodendroglioma'] },
                        { value: 'necrosis', label: 'å£Šæ­»', tumors: ['glioblastoma', 'brain_metastases'] },
                        { value: 'edema_marked', label: 'è‘—æ˜ãªæµ®è…«', tumors: ['brain_metastases', 'glioblastoma'] },
                        { value: 'multiple', label: 'å¤šç™ºæ€§', tumors: ['brain_metastases', 'pcnsl'] }
                    ]
                }
            };

            // é‘‘åˆ¥è¨ºæ–­ã®è¨ˆç®—
            const calculateDifferentials = () => {
                const selectedValues = Object.values(selectedCriteria);
                if (selectedValues.length === 0) {
                    setResults([]);
                    return;
                }

                const tumorCount = {};
                selectedValues.forEach(criterion => {
                    if (criterion && criterion.tumors) {
                        criterion.tumors.forEach(tumor => {
                            tumorCount[tumor] = (tumorCount[tumor] || 0) + 1;
                        });
                    }
                });

                const sortedTumors = Object.entries(tumorCount)
                    .sort(([,a], [,b]) => b - a)
                    .map(([tumorKey, count]) => ({
                        key: tumorKey,
                        data: tumorDatabase[tumorKey],
                        score: count,
                        percentage: Math.round((count / selectedValues.length) * 100)
                    }))
                    .filter(tumor => tumor.data);

                setResults(sortedTumors);
            };

            useEffect(() => {
                calculateDifferentials();
            }, [selectedCriteria]);

            const toggleSection = (sectionKey) => {
                setExpandedSections(prev => ({
                    ...prev,
                    [sectionKey]: !prev[sectionKey]
                }));
            };

            const handleCriterionSelect = (category, option) => {
                setSelectedCriteria(prev => ({
                    ...prev,
                    [category]: option
                }));
            };

            const removeCriterion = (category) => {
                setSelectedCriteria(prev => {
                    const newCriteria = { ...prev };
                    delete newCriteria[category];
                    return newCriteria;
                });
            };

            const clearAllCriteria = () => {
                setSelectedCriteria({});
                setResults([]);
            };

            const filteredTumors = Object.entries(tumorDatabase).filter(([key, tumor]) =>
                tumor.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                tumor.keywords.some(keyword => keyword.toLowerCase().includes(searchTerm.toLowerCase()))
            );

            return (
                <div className="max-w-7xl mx-auto p-4 bg-gray-50 min-h-screen">
                    {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
                    <div className="bg-white rounded-lg shadow-sm p-6 mb-6">
                        <h1 className="text-3xl font-bold text-gray-900 mb-2">
                            ğŸ§  æ”¾å°„ç·šç§‘èª­å½±ç”¨ è„³è…«ç˜é‘‘åˆ¥ã‚·ã‚¹ãƒ†ãƒ 
                        </h1>
                        <p className="text-gray-600 mb-4">
                            Radiopediaæº–æ‹  â€¢ WHO CNS5åˆ†é¡å¯¾å¿œ â€¢ åˆ†å­è¨ºæ–­æƒ…å ±included
                        </p>
                        
                        {/* æ¤œç´¢ãƒãƒ¼ */}
                        <div className="flex gap-4 items-center">
                            <input
                                type="text"
                                placeholder="ç–¾æ‚£åãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢..."
                                value={searchTerm}
                                onChange={(e) => setSearchTerm(e.target.value)}
                                className="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            />
                            <button
                                onClick={clearAllCriteria}
                                className="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600"
                            >
                                ãƒªã‚»ãƒƒãƒˆ
                            </button>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 xl:grid-cols-3 gap-6">
                        {/* å·¦å´: åˆ†é¡åŸºæº–é¸æŠ */}
                        <div className="xl:col-span-1 space-y-4">
                            <div className="bg-white rounded-lg shadow-sm p-4">
                                <h2 className="text-xl font-semibold text-gray-900 mb-4">ğŸ“‹ ç”»åƒæ‰€è¦‹å…¥åŠ›</h2>
                                
                                {Object.entries(classificationCriteria).map(([categoryKey, category]) => (
                                    <div key={categoryKey} className="mb-4 border border-gray-200 rounded-lg">
                                        <button
                                            onClick={() => toggleSection(categoryKey)}
                                            className="w-full px-4 py-3 text-left flex items-center justify-between bg-gray-50 hover:bg-gray-100 rounded-t-lg transition-colors"
                                        >
                                            <span className="font-medium flex items-center gap-2">
                                                <span>{category.icon}</span>
                                                {category.name}
                                            </span>
                                            <span className="text-gray-500">
                                                {expandedSections[categoryKey] ? 'âˆ’' : '+'}
                                            </span>
                                        </button>
                                        
                                        {expandedSections[categoryKey] && (
                                            <div className="p-3 space-y-2 bg-white">
                                                {category.options.map((option) => (
                                                    <button
                                                        key={option.value}
                                                        onClick={() => handleCriterionSelect(categoryKey, option)}
                                                        className={`w-full text-left p-2 rounded border transition-all ${
                                                            selectedCriteria[categoryKey]?.value === option.value
                                                                ? 'bg-blue-100 border-blue-500 font-medium'
                                                                : 'bg-white border-gray-200 hover:bg-gray-50'
                                                        }`}
                                                    >
                                                        {option.label}
                                                    </button>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                ))}
                            </div>

                            {/* é¸æŠã•ã‚ŒãŸåŸºæº– */}
                            <div className="bg-white rounded-lg shadow-sm p-4">
                                <h3 className="font-semibold text-gray-900 mb-3">âœ… é¸æŠã•ã‚ŒãŸæ‰€è¦‹</h3>
                                {Object.keys(selectedCriteria).length === 0 ? (
                                    <p className="text-gray-500 text-sm">æ‰€è¦‹ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
                                ) : (
                                    <div className="space-y-2">
                                        {Object.entries(selectedCriteria).map(([categoryKey, criterion]) => (
                                            <div key={categoryKey} className="flex items-center justify-between bg-blue-50 p-2 rounded">
                                                <span className="text-sm font-medium">{criterion.label}</span>
                                                <button
                                                    onClick={() => removeCriterion(categoryKey)}
                                                    className="text-red-600 hover:text-red-800 font-bold"
                                                >
                                                    Ã—
                                                </button>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* å³å´: é‘‘åˆ¥è¨ºæ–­çµæœ */}
                        <div className="xl:col-span-2 space-y-6">
                            {/* é‘‘åˆ¥è¨ºæ–­ãƒªã‚¹ãƒˆ */}
                            <div className="bg-white rounded-lg shadow-sm p-6">
                                <h2 className="text-xl font-semibold text-gray-900 mb-4">ğŸ¯ é‘‘åˆ¥è¨ºæ–­</h2>
                                {results.length === 0 ? (
                                    <div className="text-center py-8">
                                        <p className="text-gray-500 mb-4">ç”»åƒæ‰€è¦‹ã‚’é¸æŠã™ã‚‹ã¨é‘‘åˆ¥è¨ºæ–­ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</p>
                                        <div className="text-sm text-gray-400">
                                            ğŸ’¡ å¹´é½¢ãƒ»éƒ¨ä½ãƒ»é€ å½±ãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰å§‹ã‚ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™
                                        </div>
                                    </div>
                                ) : (
                                    <div className="space-y-3">
                                        {results.slice(0, 5).map((result, index) => (
                                            <div 
                                                key={index} 
                                                className="disease-card bg-gradient-to-r from-green-50 to-blue-50 p-4 rounded-lg border border-gray-200"
                                                onClick={() => setSelectedDisease(result)}
                                            >
                                                <div className="flex items-center justify-between">
                                                    <div className="flex-1">
                                                        <h3 className="font-bold text-gray-900 text-lg">{result.data.name}</h3>
                                                        <p className="text-sm text-gray-600">{result.data.whoGrade} â€¢ {result.data.agePreference}</p>
                                                        <p className="text-xs text-gray-500 mt-1">
                                                            ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: {result.data.keywords.join(', ')}
                                                        </p>
                                                    </div>
                                                    <div className="text-right ml-4">
                                                        <span className="inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">
                                                            #{index + 1}
                                                        </span>
                                                        <p className="text-xs text-gray-600 mt-1">
                                                            é©åˆåº¦ {result.percentage}%
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>

                            {/* ç–¾æ‚£è©³ç´°è¡¨ç¤º */}
                            {selectedDisease && (
                                <div className="bg-white rounded-lg shadow-lg p-6 border-l-4 border-blue-500">
                                    <div className="flex justify-between items-start mb-4">
                                        <h2 className="text-2xl font-bold text-gray-900">{selectedDisease.data.name}</h2>
                                        <button
                                            onClick={() => setSelectedDisease(null)}
                                            className="text-gray-500 hover:text-gray-700 text-xl font-bold"
                                        >
                                            Ã—
                                        </button>
                                    </div>

                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        {/* åŸºç¤çŸ¥è­˜ */}
                                        <div>
                                            <div className="section-header">âœ… åŸºç¤çŸ¥è­˜</div>
                                            <ul className="space-y-2">
                                                {selectedDisease.data.basics.map((item, index) => (
                                                    <li key={index} className="text-sm text-gray-700 flex items-start">
                                                        <span className="text-blue-500 mr-2">â˜‘</span>
                                                        <span>{item}</span>
                                                    </li>
                                                ))}
                                            </ul>

                                            <div className="section-header mt-4">ğŸ“Š åŸºæœ¬æƒ…å ±</div>
                                            <div className="space-y-2 text-sm">
                                                <div><span className="font-medium">WHOåˆ†é¡:</span> <span className="highlight">{selectedDisease.data.whoGrade}</span></div>
                                                <div><span className="font-medium">å¥½ç™ºå¹´é½¢:</span> {selectedDisease.data.agePreference}</div>
                                                <div><span className="font-medium">å¥½ç™ºéƒ¨ä½:</span> {selectedDisease.data.location}</div>
                                                <div><span className="font-medium">äºˆå¾Œ:</span> {selectedDisease.data.prognosis}</div>
                                            </div>
                                        </div>

                                        {/* ç”»åƒæ‰€è¦‹ */}
                                        <div>
                                            <div className="section-header">ğŸ” ç”»åƒæ‰€è¦‹ã¾ã¨ã‚</div>
                                            <ul className="space-y-2">
                                                {selectedDisease.data.imaging.map((item, index) => (
                                                    <li key={index} className="text-sm text-gray-700 flex items-start">
                                                        <span className="text-green-500 mr-2">â˜‘</span>
                                                        <span>{item}</span>
                                                    </li>
                                                ))}
                                            </ul>

                                            <div className="section-header mt-4">ğŸ¤” ä¸»ãªé‘‘åˆ¥è¨ºæ–­</div>
                                            <div className="flex flex-wrap gap-2">
                                                {selectedDisease.data.differentials.map((diff, index) => (
                                                    <span key={index} className="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs">
                                                        {diff}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* ç–¾æ‚£ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¸€è¦§ï¼ˆæ¤œç´¢æ™‚ï¼‰*/}
                            {searchTerm && (
                                <div className="bg-white rounded-lg shadow-sm p-6">
                                    <h2 className="text-xl font-semibold text-gray-900 mb-4">
                                        ğŸ” æ¤œç´¢çµæœ: "{searchTerm}"
                                    </h2>
                                    <div className="grid gap-4">
                                        {filteredTumors.map(([key, tumor]) => (
                                            <div 
                                                key={key}
                                                className="disease-card p-4 border border-gray-200 rounded-lg hover:border-blue-300"
                                                onClick={() => setSelectedDisease({data: tumor, key})}
                                            >
                                                <h3 className="font-bold text-gray-900">{tumor.name}</h3>
                                                <p className="text-sm text-gray-600">{tumor.whoGrade} â€¢ {tumor.agePreference}</p>
                                                <p className="text-xs text-gray-500 mt-1">
                                                    ğŸ“ {tumor.location}
                                                </p>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>

                    {/* ãƒ•ãƒƒã‚¿ãƒ¼ */}
                    <div className="mt-8 bg-white rounded-lg shadow-sm p-4">
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600">
                            <div>
                                <h4 className="font-semibold text-gray-900 mb-2">ğŸ“š ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹</h4>
                                <ul className="space-y-1">
                                    <li>â€¢ Radiopedia.org</li>
                                    <li>â€¢ WHO CNS5 Classification</li>
                                    <li>â€¢ åˆ†å­è¨ºæ–­ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³</li>
                                </ul>
                            </div>
                            <div>
                                <h4 className="font-semibold text-gray-900 mb-2">âš ï¸ å…è²¬äº‹é …</h4>
                                <p>æœ¬ã‚·ã‚¹ãƒ†ãƒ ã¯æ•™è‚²ç›®çš„ã§ã‚ã‚Šã€å®Ÿéš›ã®è¨ºæ–­ã«ã¯åŒ»å¸«ã®ç·åˆçš„åˆ¤æ–­ãŒå¿…è¦ã§ã™ã€‚</p>
                            </div>
                            <div>
                                <h4 className="font-semibold text-gray-900 mb-2">ğŸ”„ æ›´æ–°æƒ…å ±</h4>
                                <p>Version 2.0 - WHO CNS5å¯¾å¿œ<br/>åˆ†å­è¨ºæ–­æƒ…å ±è¿½åŠ </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<RadiologyTumorSystem />, document.getElementById('root'));
    </script>
</body>
</html>
